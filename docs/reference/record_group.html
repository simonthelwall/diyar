<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Deterministic linkage for epidemiological analysis — record_group • diyar</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Deterministic linkage for epidemiological analysis — record_group" />

<meta property="og:description" content="This function links records from one or more datasets into a unique idenfier. Linkage is based on specified matching criteria." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">diyar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Deterministic linkage for epidemiological analysis</h1>
    
    <div class="hidden name"><code>record_group.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function links records from one or more datasets into a unique idenfier. Linkage is based on specified matching criteria.</p>
    
    </div>

    <pre class="usage"><span class='fu'>record_group</span>(<span class='no'>df</span>, <span class='no'>sn</span>, <span class='no'>criteria</span>, <span class='kw'>sub_criteria</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>data_source</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>display</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>Dataframe. One or more datasets appened together.</p></td>
    </tr>
    <tr>
      <th>sn</th>
      <td><p>Unique record indentifier for the dataframe.</p></td>
    </tr>
    <tr>
      <th>criteria</th>
      <td><p>Matching criteria. Records with matching values in these columns are grouped together. Records are grouped in order of decreasing certainty. For exampe, the first criteria is more certain than second therefore, records matching on the first criteria will be grouped together in preference to those matching on the second criteria.</p></td>
    </tr>
    <tr>
      <th>sub_criteria</th>
      <td><p>Matching sub-criteria. If is not <code>NULL</code>, only records with matching values in the <code>criteria</code> and <code>sub_criteria</code> columns are grouped together. Usefull in providing alternative or less stringent matching criteria.</p></td>
    </tr>
    <tr>
      <th>data_source</th>
      <td><p>Unique dataset indentifier for the dataframe. Useful when dataframe contains multiple datasets.</p></td>
    </tr>
    <tr>
      <th>display</th>
      <td><p>If <code>TRUE</code>, progress status at each stage of record grouping is displayed on screen.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Dataframe</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>dplyr</span>)

<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(
  <span class='kw'>cri_1</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"A"</span>,<span class='st'>"C"</span>,<span class='st'>"B"</span>,<span class='st'>"C"</span>,<span class='st'>"A"</span>),
  <span class='kw'>r_id</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>),
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind</a></span>(<span class='no'>df</span>, <span class='fu'>record_group</span>(<span class='no'>df</span>,<span class='no'>r_id</span>, <span class='no'>cri_1</span>))</div><div class='output co'>#&gt; [1] "Group criteria 1"
#&gt; [1] "5 of 5 record(s) grouped into groups. 0 records not yet grouped."
#&gt; [1] "1 single-record group(s) untagged for possible matching on the next criteria. Total records not yet grouped is now 1."
#&gt; [1] "Record grouping complete; 1 group(s) contain only one record."</div><div class='output co'>#&gt;   cri_1 r_id sn pid    pid_cri
#&gt; 1     A    1  1   1 Criteria 1
#&gt; 2     C    2  2   2 Criteria 1
#&gt; 3     B    3  3   3       None
#&gt; 4     C    4  4   2 Criteria 1
#&gt; 5     A    5  5   1 Criteria 1</div><div class='input'>
<span class='co'># Records with NA or "" in a particular criteria are excluded from episode grouping on that criteria</span>
<span class='no'>data_2</span> <span class='kw'>&lt;-</span> <span class='no'>df</span>
<span class='no'>data_2</span>$<span class='no'>cri_1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/ifelse'>ifelse</a></span>(<span class='no'>data_2</span>$<span class='no'>cri_1</span><span class='kw'>==</span><span class='st'>"A"</span>, <span class='fl'>NA</span>, <span class='no'>data_2</span>$<span class='no'>cri_1</span>)
<span class='no'>data_2</span>$<span class='no'>cri_1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/ifelse'>ifelse</a></span>(<span class='no'>data_2</span>$<span class='no'>cri_1</span><span class='kw'>==</span><span class='st'>"B"</span>, <span class='st'>""</span>, <span class='no'>data_2</span>$<span class='no'>cri_1</span>)

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind</a></span>(<span class='no'>data_2</span>, <span class='fu'>record_group</span>(<span class='no'>data_2</span>,<span class='no'>r_id</span>, <span class='no'>cri_1</span>, <span class='kw'>display</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; [1] "Record grouping complete; 3 group(s) contain only one record."</div><div class='output co'>#&gt;   cri_1 r_id sn pid    pid_cri
#&gt; 1  &lt;NA&gt;    1  1   1       None
#&gt; 2     C    2  2   2 Criteria 1
#&gt; 3          3  3   3       None
#&gt; 4     C    4  4   2 Criteria 1
#&gt; 5  &lt;NA&gt;    5  5   5       None</div><div class='input'>
<span class='co'># Record grouping on 2 criteria</span>
<span class='no'>data_3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(
  <span class='kw'>cri_1</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"A"</span>,<span class='st'>"C"</span>,<span class='st'>"Z"</span>,<span class='st'>"V"</span>,<span class='st'>"F"</span>,<span class='st'>"G"</span>,<span class='st'>"G"</span>),
  <span class='kw'>cri_2</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"CC"</span>,<span class='st'>"AA"</span>,<span class='st'>"CC"</span>,<span class='st'>"VV"</span>,<span class='st'>"AA"</span>,<span class='st'>"CB"</span>,<span class='st'>"CC"</span>),
  <span class='kw'>r_id</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>7</span>),

  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='no'>data_3</span>$<span class='no'>cri_1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/ifelse'>ifelse</a></span>(<span class='no'>data_3</span>$<span class='no'>r_id</span><span class='kw'>==</span><span class='fl'>7</span>, <span class='fl'>NA</span>, <span class='no'>data_3</span>$<span class='no'>cri_1</span> )
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind</a></span>(<span class='no'>data_3</span>, <span class='fu'>record_group</span>(<span class='no'>data_3</span>,<span class='no'>r_id</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='no'>cri_1</span>, <span class='no'>cri_2</span>), <span class='kw'>display</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; [1] "Record grouping complete; 2 group(s) contain only one record."</div><div class='output co'>#&gt;   cri_1 cri_2 r_id sn pid    pid_cri
#&gt; 1     A    CC    1  1   1 Criteria 2
#&gt; 2     C    AA    2  2   2 Criteria 2
#&gt; 3     Z    CC    3  3   1 Criteria 2
#&gt; 4     V    VV    4  4   4       None
#&gt; 5     F    AA    5  5   2 Criteria 2
#&gt; 6     G    CB    6  6   6       None
#&gt; 7  &lt;NA&gt;    CC    7  7   1 Criteria 2</div><div class='input'>
<span class='co'># At each stage of episode grouping ("criteria"), additonal matching conditions ("sub_criteria") can be introduced with a list of sub-criteria.</span>
<span class='co'># Each sub-criteria consists of character vectors which are column names within the dataframe.</span>
<span class='co'># If records match on the "criteria" but do not match on ALL "sub_criteria", they are assigned to a new record group</span>
<span class='co'># "sub_criteria" should be a list of character vectors. Each vector represents a sub-criteria</span>
<span class='co'># Each sub-criteria should be name using this format; sXy, where "X" is linkage stage when the sub-criteria is to be introduced while "y" is a sufficient prefix to differentiate between the criteria</span>

<span class='no'>data_4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(
  <span class='kw'>cri_1</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>NA</span>,<span class='fl'>2</span>,<span class='fl'>2</span>),
  <span class='kw'>cri_2</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/rep'>rep</a></span>(<span class='st'>"A1"</span>,<span class='fl'>7</span>),
  <span class='kw'>cri_2a</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"A"</span>,<span class='st'>"B"</span>,<span class='st'>"D"</span>,<span class='st'>"X"</span>,<span class='st'>"F"</span>,<span class='st'>"G"</span>,<span class='st'>"G"</span>),
  <span class='kw'>cri_2b</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"B"</span>,<span class='st'>"B"</span>,<span class='st'>"D"</span>,<span class='st'>"X"</span>,<span class='st'>"F"</span>,<span class='st'>"G"</span>,<span class='st'>"I"</span>),
  <span class='kw'>cri_2c</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"A"</span>,<span class='st'>"C"</span>,<span class='st'>"A"</span>,<span class='st'>"A"</span>,<span class='st'>"F"</span>,<span class='st'>"G"</span>,<span class='st'>"I"</span>),
  <span class='kw'>r_id</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>7</span>),

  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind</a></span>(<span class='no'>df_4a</span>, <span class='fu'>record_group</span>(<span class='no'>data_4</span>,<span class='no'>r_id</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='no'>cri_1</span>, <span class='no'>cri_2</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>s2a</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"cri_2a"</span>,<span class='st'>"cri_2b"</span>,<span class='st'>"cri_2c"</span>)) ))</div><div class='output co'>#&gt; <span class='error'>Error in cbind(df_4a, record_group(data_4, r_id, c(cri_1, cri_2), list(s2a = c("cri_2a",     "cri_2b", "cri_2c")))): object 'df_4a' not found</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Olisaeloka Nsonwu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

